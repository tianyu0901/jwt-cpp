<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JWT-C++: jwt-cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JWT-C++
   &#160;<span id="projectnumber">0.5.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">jwt-cpp </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <a href="https://github.com/Thalhammer/jwt-cpp/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Thalhammer/jwt-cpp" alt="License Badge" class="inline"/></a> <a href="https://app.codacy.com/app/Thalhammer/jwt-cpp?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=Thalhammer/jwt-cpp&amp;utm_campaign=Badge_Grade_Settings"><img src="https://api.codacy.com/project/badge/Grade/5f7055e294744901991fd0a1620b231d" alt="Codacy Badge" class="inline"/></a> <a href="https://travis-ci.com/Thalhammer/jwt-cpp"><img src="https://travis-ci.com/Thalhammer/jwt-cpp.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/Thalhammer/jwt-cpp?branch=master"><img src="https://coveralls.io/repos/github/Thalhammer/jwt-cpp/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://thalhammer.github.io/jwt-cpp/"><img src="https://img.shields.io/badge/Documentation-master-blue" alt="Documentation Badge" class="inline"/></a> <a href="https://github.com/Thalhammer/jwt-cpp/stargazers"><img src="https://img.shields.io/github/stars/Thalhammer/jwt-cpp" alt="Stars Badge" class="inline"/></a></p>
<p>A header only library for creating and validating <a href="https://tools.ietf.org/html/rfc7519">JSON Web Tokens</a> in C++11. For a great introduction, <a href="https://jwt.io/introduction/">read this</a></p>
<h1>Signature algorithms</h1>
<p>As of version 0.2.0 jwt-cpp supports all algorithms defined by the spec. The modular design of jwt-cpp allows one to add additional algorithms without any problems. If you need any feel free to open a pull request. For the sake of completeness, here is a list of all supported algorithms:</p>
<ul>
<li>HS256</li>
<li>HS384</li>
<li>HS512</li>
<li>RS256</li>
<li>RS384</li>
<li>RS512</li>
<li>ES256</li>
<li>ES384</li>
<li>ES512</li>
<li>PS256</li>
<li>PS384</li>
<li>PS512</li>
</ul>
<h1>Overview</h1>
<p>Since 0.5.0-dev, there is no hard dependency on a JSON library; instead there's a generic <code><a class="el" href="classjwt_1_1basic__claim.html" title="a class to store a generic JSON value as claim">jwt::basic_claim</a></code> which is templated around the types required.It requires a traits type, which defines types for a value, object, array, string, number, integer and boolean, as well as methods to translate between them.</p>
<div class="fragment"><div class="line"><a class="code" href="classjwt_1_1basic__claim.html">jwt::basic_claim&lt;my_favorite_json_library_traits&gt;</a> <a class="code" href="namespacejwt.html#a1cbb110a4d922889548df46412752d9e">claim</a>(json::object({{<span class="stringliteral">&quot;json&quot;</span>, <span class="keyword">true</span>},{<span class="stringliteral">&quot;example&quot;</span>, 0}}));</div>
</div><!-- fragment --><p>This allows for complete freedom when picking which libraries you want to use. For more information, <a href="#providing-your-own-json-traits-your-traits">see below</a></p>
<p>In order to maintain compatibility, <a href="https://github.com/kazuho/picojson">picojson</a> is still used to provide a specialized <code><a class="el" href="namespacejwt.html#a1cbb110a4d922889548df46412752d9e">jwt::claim</a></code> along with all helpers. Defining <code>DISABLE_PICOJSON</code> will remove this optional dependency.</p>
<p>As for the base64 requirements of JWTs, this libary provides <code><a class="el" href="base_8h_source.html">base.h</a></code> with all the required implentation; However base64 implementations are very common, with varying degrees of performance. When providing your own base64 implementation, you can define <code>DISABLE_BASE64</code> to remove the jwt-cpp implementation.</p>
<h2>Getting Started</h2>
<p>Simple example of decoding a token and printing all claims:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;jwt-cpp/jwt.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    std::string token = <span class="stringliteral">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXUyJ9.eyJpc3MiOiJhdXRoMCJ9.AbIJTDMFc7yUa5MhvcP03nJPyCPzZtQcGEp-zWfOkEE&quot;</span>;</div>
<div class="line">    <span class="keyword">auto</span> decoded = <a class="code" href="namespacejwt.html#ad2d92bcbaa133c4702332993b702cd5c">jwt::decode</a>(token);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; e : decoded.get_payload_claims())</div>
<div class="line">        std::cout &lt;&lt; e.first &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; e.second &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In order to verify a token you first build a verifier and use it to verify a decoded token.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> verifier = <a class="code" href="namespacejwt.html#ab3b2cdbf27752e9c9a9ad9feffc83be2">jwt::verify</a>()</div>
<div class="line">    .allow_algorithm(<a class="code" href="structjwt_1_1algorithm_1_1hs256.html">jwt::algorithm::hs256</a>{ <span class="stringliteral">&quot;secret&quot;</span> })</div>
<div class="line">    .with_issuer(<span class="stringliteral">&quot;auth0&quot;</span>);</div>
<div class="line"> </div>
<div class="line">verifier.verify(decoded_token);</div>
</div><!-- fragment --><p>The created verifier is stateless so you can reuse it for different tokens.</p>
<p>Creating a token (and signing) is equally easy.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> token = <a class="code" href="namespacejwt.html#a61c4b823ee79045671d587cf59ca6774">jwt::create</a>()</div>
<div class="line">    .set_issuer(<span class="stringliteral">&quot;auth0&quot;</span>)</div>
<div class="line">    .set_type(<span class="stringliteral">&quot;JWS&quot;</span>)</div>
<div class="line">    .set_payload_claim(<span class="stringliteral">&quot;sample&quot;</span>, <a class="code" href="classjwt_1_1basic__claim.html">jwt::claim</a>(std::string(<span class="stringliteral">&quot;test&quot;</span>)))</div>
<div class="line">    .sign(<a class="code" href="structjwt_1_1algorithm_1_1hs256.html">jwt::algorithm::hs256</a>{<span class="stringliteral">&quot;secret&quot;</span>});</div>
</div><!-- fragment --><p>Here is a simple example of creating a token that will expire in one hour:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> token = <a class="code" href="namespacejwt.html#a61c4b823ee79045671d587cf59ca6774">jwt::create</a>()</div>
<div class="line">    .set_issuer(<span class="stringliteral">&quot;auth0&quot;</span>)</div>
<div class="line">    .set_issued_at(std::chrono::system_clock::now())</div>
<div class="line">    .set_expires_at(std::chrono::system_clock::now() + std::chrono::seconds{3600})</div>
<div class="line">    .sign(<a class="code" href="structjwt_1_1algorithm_1_1hs256.html">jwt::algorithm::hs256</a>{<span class="stringliteral">&quot;secret&quot;</span>});</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>To see more examples working with RSA public and private keys, visit our <a href="https://github.com/Thalhammer/jwt-cpp/tree/master/example">examples</a>! </p>
</blockquote>
<h2>Providing your own JSON Traits</h2>
<p>There are several key items that need to be provided to a <code><a class="el" href="classjwt_1_1basic__claim.html" title="a class to store a generic JSON value as claim">jwt::basic_claim</a></code> in order for it to be interoptable with you JSON library of choice.</p>
<ul>
<li>type specifications</li>
<li>conversion from genric "value type" to specific</li>
<li>serialization and parsing</li>
</ul>
<p>If ever you are not sure, the traits are heavily checked against static asserts to make sure you provide everything that's required.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>my_favorite_json_library_traits {</div>
<div class="line">    <span class="comment">// Type Specifications</span></div>
<div class="line">    <span class="keyword">using</span> value_type = json; <span class="comment">// The generic &quot;value type&quot; implementation, most libraries have one</span></div>
<div class="line">    <span class="keyword">using</span> object_type = json::object_t; <span class="comment">// The &quot;map type&quot; string to value</span></div>
<div class="line">    <span class="keyword">using</span> array_type = json::array_t; <span class="comment">// The &quot;list type&quot; array of values</span></div>
<div class="line">    <span class="keyword">using</span> string_type = std::string; <span class="comment">// The &quot;list of chars&quot;, must be a narrow char</span></div>
<div class="line">    <span class="keyword">using</span> number_type = double; <span class="comment">// The &quot;percision type&quot;</span></div>
<div class="line">    <span class="keyword">using</span> integer_type = int64_t; <span class="comment">// The &quot;integral type&quot;</span></div>
<div class="line">    <span class="keyword">using</span> boolean_type = bool; <span class="comment">// The &quot;boolean type&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Translation between the implementation notion of type, to the jwt::json::type equivilant</span></div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="namespacejwt_1_1json.html#aa4e55c1854b652f73fad3b811ff94a3e">jwt::json::type</a> get_type(<span class="keyword">const</span> value_type &amp;val) {</div>
<div class="line">        <span class="keyword">using</span> <a class="code" href="namespacejwt_1_1json.html#aa4e55c1854b652f73fad3b811ff94a3e">jwt::json::type</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (val.type() == json::value_t::object)</div>
<div class="line">            <span class="keywordflow">return</span> type::object;</div>
<div class="line">        <span class="keywordflow">if</span> (val.type() == json::value_t::array)</div>
<div class="line">            <span class="keywordflow">return</span> type::array;</div>
<div class="line">        <span class="keywordflow">if</span> (val.type() == json::value_t::string)</div>
<div class="line">            <span class="keywordflow">return</span> type::string;</div>
<div class="line">        <span class="keywordflow">if</span> (val.type() == json::value_t::number_float)</div>
<div class="line">            <span class="keywordflow">return</span> type::number;</div>
<div class="line">        <span class="keywordflow">if</span> (val.type() == json::value_t::number_integer)</div>
<div class="line">            <span class="keywordflow">return</span> type::integer;</div>
<div class="line">        <span class="keywordflow">if</span> (val.type() == json::value_t::boolean)</div>
<div class="line">            <span class="keywordflow">return</span> type::boolean;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">throw</span> std::logic_error(<span class="stringliteral">&quot;invalid type&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Conversion from generic value to specific type</span></div>
<div class="line">    <span class="keyword">static</span> object_type as_object(<span class="keyword">const</span> value_type &amp;val);</div>
<div class="line">    <span class="keyword">static</span> array_type as_array(<span class="keyword">const</span> value_type &amp;val);</div>
<div class="line">    <span class="keyword">static</span> string_type as_string(<span class="keyword">const</span> value_type &amp;val);</div>
<div class="line">    <span class="keyword">static</span> number_type as_number(<span class="keyword">const</span> value_type &amp;val);</div>
<div class="line">    <span class="keyword">static</span> integer_type as_int(<span class="keyword">const</span> value_type &amp;val);</div>
<div class="line">    <span class="keyword">static</span> boolean_type as_bool(<span class="keyword">const</span> value_type &amp;val);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// serilization and parsing</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">bool</span> parse(value_type &amp;val, string_type str);</div>
<div class="line">    <span class="keyword">static</span> string_type serialize(<span class="keyword">const</span> value_type &amp;val);</div>
<div class="line">};</div>
</div><!-- fragment --><h1>Contributing</h1>
<p>If you have an improvement or found a bug feel free to <a href="https://github.com/Thalhammer/jwt-cpp/issues/new">open an issue</a> or add the change and create a pull request. If you file a bug please make sure to include as much information about your environment (compiler version, etc.) as possible to help reproduce the issue. If you add a new feature please make sure to also include test cases for it.</p>
<h1>Dependencies</h1>
<p>In order to use jwt-cpp you need the following tools.</p>
<ul>
<li>libcrypto (openssl or compatible)</li>
<li>libssl-dev (for the header files)</li>
<li>a compiler supporting at least c++11</li>
<li>basic stl support</li>
</ul>
<p>In order to build the test cases you also need</p>
<ul>
<li>gtest</li>
<li>pthread</li>
</ul>
<h1>Troubleshooting</h1>
<h2>Expired tokens</h2>
<p>If you are generating tokens that seem to immediately expire, you are likely not using UTC. Specifically, if you use <code>get_time</code> to get the current time, it likely uses localtime, while this library uses UTC, which may be why your token is immediately expiring. Please see example above on the right way to use current time.</p>
<h2>Missing _HMAC and _EVP_sha256 symbols on Mac</h2>
<p>There seems to exists a problem with the included openssl library of MacOS. Make sure you link to one provided by brew. See <a href="https://github.com/Thalhammer/jwt-cpp/issues/6">here</a> for more details.</p>
<h2>Building on windows fails with syntax errors</h2>
<p>The header <code>&lt;Windows.h&gt;</code>, which is often included in windowsprojects, defines macros for MIN and MAX which screw up std::numeric_limits. See <a href="https://github.com/Thalhammer/jwt-cpp/issues/5">here</a> for more details. To fix this do one of the following things:</p>
<ul>
<li>define NOMINMAX, which suppresses this behaviour</li>
<li>include this library before you include windows.h</li>
<li>place <code>#undef max</code> and <code>#undef min</code> before you include this library </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="anamespacejwt_html_a61c4b823ee79045671d587cf59ca6774"><div class="ttname"><a href="namespacejwt.html#a61c4b823ee79045671d587cf59ca6774">jwt::create</a></div><div class="ttdeci">builder&lt; json_traits &gt; create()</div><div class="ttdef"><b>Definition:</b> jwt.h:1924</div></div>
<div class="ttc" id="astructjwt_1_1algorithm_1_1hs256_html"><div class="ttname"><a href="structjwt_1_1algorithm_1_1hs256.html">jwt::algorithm::hs256</a></div><div class="ttdef"><b>Definition:</b> jwt.h:642</div></div>
<div class="ttc" id="anamespacejwt_html_ab3b2cdbf27752e9c9a9ad9feffc83be2"><div class="ttname"><a href="namespacejwt.html#ab3b2cdbf27752e9c9a9ad9feffc83be2">jwt::verify</a></div><div class="ttdeci">verifier&lt; Clock, json_traits &gt; verify(Clock c)</div><div class="ttdef"><b>Definition:</b> jwt.h:1907</div></div>
<div class="ttc" id="anamespacejwt_1_1json_html_aa4e55c1854b652f73fad3b811ff94a3e"><div class="ttname"><a href="namespacejwt_1_1json.html#aa4e55c1854b652f73fad3b811ff94a3e">jwt::json::type</a></div><div class="ttdeci">type</div><div class="ttdoc">Generic JSON types used in JWTs.</div><div class="ttdef"><b>Definition:</b> jwt.h:822</div></div>
<div class="ttc" id="anamespacejwt_html_ad2d92bcbaa133c4702332993b702cd5c"><div class="ttname"><a href="namespacejwt.html#ad2d92bcbaa133c4702332993b702cd5c">jwt::decode</a></div><div class="ttdeci">decoded_jwt&lt; json_traits &gt; decode(const typename json_traits::string_type &amp;token, Decode decode)</div><div class="ttdef"><b>Definition:</b> jwt.h:1937</div></div>
<div class="ttc" id="anamespacejwt_html_a1cbb110a4d922889548df46412752d9e"><div class="ttname"><a href="namespacejwt.html#a1cbb110a4d922889548df46412752d9e">jwt::claim</a></div><div class="ttdeci">basic_claim&lt; picojson_traits &gt; claim</div><div class="ttdef"><b>Definition:</b> jwt.h:2026</div></div>
<div class="ttc" id="aclassjwt_1_1basic__claim_html"><div class="ttname"><a href="classjwt_1_1basic__claim.html">jwt::basic_claim</a></div><div class="ttdoc">a class to store a generic JSON value as claim</div><div class="ttdef"><b>Definition:</b> jwt.h:1065</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
